<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lahore Watches</title>

    <script src="helper_files/jquery.js"></script>

    <script src="https://www.gstatic.com/firebasejs/3.6.2/firebase.js"></script>
    <script src="helper_files/firebase.js"></script>
</head>
<body>

<div id="LoginDiv" style="display: none">

    <a href="login.html">
        <button>Login or SignUp</button>
    </a>

</div>
<br>
<div id="LoggedDiv" style="display:none;">

    <br>
    <button id="LogOutButton">

        Logout

    </button>

    <br>


</div>
<br>
<button id="cart">

    <!--- A new page cart.html has to be made --->

</button>
<br><br>


<input type="text" placeholder="Search here" id="SearchBar">

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<button id="SearchSubmit">Search</button>

<br>

<button id="Brands">Brands</button>
<br>

<div id="results" style="display: none">

</div>


<script>

    var username = localStorage.getItem('username');
    var cart = localStorage.getItem('cart');
    var LoggedDiv = $('#LoggedDiv');
    var LoginDiv = $('#LoginDiv');
    var CartDiv = $('#cart');


    function main()
    {
        if(username == null || username == undefined || typeof username == 'undefined')
        {
            LoggedDiv.css({'display' : 'none'});
            LoginDiv.css({'display' : 'block'});
            localStorage.clear();
        }
        else
        {
            LoginDiv.css({'display' : 'none'});
            LoggedDiv.css({'display' : 'Block'});
            LoggedDiv.prepend(' Welcome ' + username + ' ');

        }

        if(cart == null || typeof cart == 'undefined' || cart == undefined)
        {
            cart = [];
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        cart = localStorage.getItem('cart');
        cart = JSON.parse(cart);
        CartDiv.html('Cart ' + '<br>' +  cart.length + '  items ');

        CartDiv.click(function () {

            window.location.href = "cart.html";

        });

        $('#LogOutButton').click(function () {

            localStorage.clear();
            firebase.auth().signOut().then(function() {
                localStorage.clear();
                location.reload();
            }, function(error) {
                console.log(error.code);
                console.log(error.message);
                location.reload();
            });


        });


    }

    main();

</script>

</body>
</html>